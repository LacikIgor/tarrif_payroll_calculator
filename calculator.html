<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
    </head>
<body>
<!-- 
      THE CALCULATOR CODE BEGINS HERE ENDS IN THE END OF FILE:

        Don't forget to add these stylesheets in the head element
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

-->
    <div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.8&appId=766101933408509";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
    <form>
        <div class="panel panel-default" style="margin-left:25px;width: 300px;">
        <div class="panel-heading text-center">
          <b>Platová kalkulačka</b>
        </div>
        <div class="panel-body" style="padding:10px">
          <div class="form-group">
            <label for="payrollClass">Platová trieda</label>
            <select class="form-control" id="payrollClass">
              <option>1</option>
              <option>2</option>
              <option>3</option>
              <option>4</option>
              <option>5</option>
              <option>6</option>
              <option>7</option>
              <option>8</option>
              <option>9</option>
              <option>10</option>
              <option>11</option>
              <option>12</option>
              <option>13</option>
              <option>14</option>
            </select>
          </div>
          <div class="form-group">
            <label for="yearsExperience">Počet rokov praxe</label>
            <select class="form-control" id="yearsExperience">
              <option>0</option>
              <option>1</option>
              <option>2</option>
              <option>3</option>
              <option>4</option>
              <option>5</option>
              <option>6</option>
              <option>7</option>
              <option>8</option>
              <option>9</option>
              <option>10</option>
              <option>11</option>
              <option>12</option>
              <option>13</option>
              <option>14</option>
              <option>15</option>
              <option>16</option>
              <option>17</option>
              <option>18</option>
              <option>19</option>
              <option>20</option>
              <option>21</option>
              <option>22</option>
              <option>23</option>
              <option>24</option>
              <option>25</option>
              <option>26</option>
              <option>27</option>
              <option>28</option>
              <option>29</option>
              <option>30</option>
              <option>31</option>
              <option>32</option>
              <option>33</option>
              <option>34</option>
              <option>35</option>
              <option>36</option>
              <option>37</option>
              <option>38</option>
              <option>39</option>
              <option>40</option>
              <option>41</option>
              <option>42</option>
              <option>43</option>
              <option>44</option>
              <option>45</option>
              <option>46</option>
              <option>47</option>
              <option>48</option>
              <option>49</option>
              <option>50</option>
            </select>
          </div>
          <div class="form-group">
            <label for="payrollLevel">Platový stupeň</label>
            <select class="form-control" id="payrollLevel" disabled>
              <option>1</option>
              <option>2</option>
              <option>3</option>
              <option>4</option>
              <option>5</option>
              <option>6</option>
              <option>7</option>
              <option>8</option>
              <option>9</option>
              <option>10</option>
              <option>11</option>
              <option>12</option>
              <option>13</option>
              <option>14</option>
            </select>
          </div>
          <div class="form-group">
            <label for="scale">Stupnica</label>
            <select class="form-control" id="scale" aria-describedby="scaleHelpBlock">
              <option value="basic">Základná</option>
              <option value="individual">Osobitná</option>
            </select>
          </div>
          <button type="button" class="btn btn-success center-block" id="compare">Porovnať</button>
          <br />
          <div class="row" id="result" style="display:none;">
      <div class="panel panel-default" style="margin: 0px auto;width: 90%;">
        <div class="panel-heading text-center">Výsledok porovnania</div>
        <div class="panel-body">
          <table style="width: 100%">
            <tr>
              <td>Súčasný plat</td>
              <td id="current_result"></td>
            </tr>
            <tr>
              <td>Plat po zavedení legislatívy</td>
              <td id="future_result"></td>
            </tr>
            <tr>
              <td>Rozdiel</td>
              <td><span class="text-success" style="font-weight:bolder;" id="result_diff"></span></td>
            </tr>
          </table>
          <br />
          <div class="fb-like" data-href="https://www.facebook.com/beblavy/" data-layout="button" data-action="like" data-size="large" data-show-faces="true" data-share="false"></div>
          <br />
        </div>
      </div>
    </div>
        </div>
        </div>
          <p id="scaleHelpBlock" class="form-text text-muted">
            Štandardne sú zamestnanci vo verejnej službe odmeňovaní podľa základnej stupnice.<br />
            Ak chcete vedieť, kto je odmeňovaný podľa osobitnej stupnice, <a href="http://mzdy.beblavy.sk/osobitna_stupnica.html">kliknite sem.</a>
            <br />
            <br />
            Kalkulačka sa netýka pedagogických zamestnancov a zdravotníkov.
          </p>
    </form>
</div>
<!-- Libraries -->
<script src="http://code.jquery.com/jquery-1.9.0rc1.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Data -->
<script src="http://mzdy.beblavy.sk/data/current_basic_table.js"></script>
<script src="http://mzdy.beblavy.sk/data/current_individual_table.js"></script>
<script src="http://mzdy.beblavy.sk/data/table_after_change.js"></script>
<!-- Logic -->
<script>

  $( "body" ).on( "click", "#compare", function() {
    try {
      calculateDifference();
    }
    catch( error ) {
      console.log( "Error in calculate button click event" );
      console.log( error );
    }
  } );

  $( "body" ).on( "change", "#yearsExperience", function() {
    try {
      setPayrollLevel();
    }
    catch( error ) {
      console.log( "Error in experience change event" );
      console.log( error );
    }
  } );

  $( "body" ).on( "change", "#scale", function() {
    try {
      setPayrollLevel();
    }
    catch( error ) {
      console.log( "Error in scale change event" );
      console.log( error );
    }
  } );

  function setPayrollLevel() {
    var payrollClass = getSelectedPayrollClass();
    var experience = getSelectedExperience();
    var payrollLevel = basicExperienceLevelMap[experience];
    if ( !currentIsBasic() ) {
      payrollLevel = individualExperienceLevelMap[experience];
    }
    $( "#payrollLevel" ).val( payrollLevel );
  }

  function calculateDifference() {
    try {
      var selectedPayrollClass = getSelectedPayrollClass();
      var selectedExperience = getSelectedExperience();
      var current = calculateCurrent( selectedPayrollClass, selectedExperience );
      var future  = calculateFuture( selectedPayrollClass, selectedExperience );
      var diff    = ( future - current ).toFixed( 2 );
      displayResults(current, future, diff);
    }
    catch( error ) {
      console.log( "Error in calculateDifference" );
      console.log( error );
    }
  }

  function getSelectedPayrollClass() {
    try {
      return $("#payrollClass").val();
    }
    catch( error ) {
      console.log( "Error in getSelectedPayrollClass" );
      console.log( error );
    }
  }

  function getSelectedExperience() {
    try {
      return $("#yearsExperience").val();
    }
    catch( error ) {
      console.log( "Error in getSelectedExperience" );
      console.log( error );
    }
  }

  function displayResults( current, future, diff ) {
    try {
      $( "#current_result" ).html( "&nbsp;" + String(current).replace(".", ",") + "&euro;" );
      $( "#future_result" ).html( "&nbsp;" + String(future).replace(".", ",") + "&euro;" );
      $( "#result_diff" ).html( "&nbsp;" + String(diff).replace(".", ",") + "&euro;" );
      $( "#result" ).show( 500 );
    }
    catch( error ) {
      console.log( "Error in displayResults" );
      console.log( error );
    }
  }

  function calculateCurrent( payrollClass, experience ) {
    try {
      if ( currentIsBasic() ) {
        return calculateCurrentBasic( payrollClass, experience );
      }
      return calculateCurrentIndividual( payrollClass, experience );
    }
    catch( error ) {
      console.log( "Error in calculateCurrent" );
      console.log( error );
    }
  }

  function currentIsBasic() {
    try{
      return $( "#scale" ).val() === "basic";
    }
    catch( error ) {
      console.log( "Error in currentIsBasic" );
      console.log( error );
    }
  }

  function calculateCurrentBasic( payrollClass, experience ) {
    try{
      return cur_basic[experience][payrollClass-1];
    }
    catch( error ) {
      console.log( "Error in calculateCurrentBasic" );
      console.log( error );
    }
  }

  function calculateCurrentIndividual( payrollClass, experience ) {
    try{
      return cur_individual[experience][payrollClass-1];
    }
    catch( error ) {
      console.log( "Error in calculateCurrentIndividual" );
      console.log( error );
    }
  }

  function calculateFuture( payrollClass, experience ) {
    try{
      return after_change[experience][payrollClass-1];
    }
    catch( error ) {
      console.log( "Error in calculateFuture" );
      console.log( error );
    }
  }

</script>

</body>
</html>
</html>